{% extends "base.html" %}
{% load custom_filters %}  <!-- ì»¤ìŠ¤í…€ í•„í„° ë¡œë“œ -->

{% block content %}
    <h2>{{ post.title }}</h2>
    <p>ì‘ì„±ì: {{ post.author.nickname }}</p>
    <p>{{ post.content }}</p>
    <p>ì‘ì„±ì¼: {{ post.created_at }}</p>

    {% if post.author == request.user %}
        <a href="{% url 'post_update' post.id %}">ìˆ˜ì •</a>
        <form method="POST" action="{% url 'post_delete' post.id %}" style="display:inline;">
            {% csrf_token %}
            <button type="submit">ì‚­ì œ</button>
        </form>
    {% endif %}

    <h3>ì¢‹ì•„ìš”/ì‹«ì–´ìš”</h3>
    <p>ğŸ‘ ì¢‹ì•„ìš”: {{ post_likes }} | ğŸ‘ ì‹«ì–´ìš”: {{ post_dislikes }}</p>

    <form method="POST" action="{% url 'like_dislike_post' post.id %}">
        {% csrf_token %}
        <button type="submit" name="value" value="1">ğŸ‘ ì¢‹ì•„ìš”</button>
        <button type="submit" name="value" value="-1">ğŸ‘ ì‹«ì–´ìš”</button>
    </form>

    <h3>ëŒ“ê¸€</h3>
    <form method="POST" action="{% url 'add_comment' post.id %}">
        {% csrf_token %}
        <textarea name="content" required></textarea>
        <button type="submit">ëŒ“ê¸€ ì‘ì„±</button>
    </form>

    {% for comment in comments %}
        <p>{{ comment.author.nickname }}: {{ comment.content }}</p>
        <p>ğŸ‘ ì¢‹ì•„ìš”: {{ comment_reactions|get_item:comment.id|get_item:"likes" }} | ğŸ‘ ì‹«ì–´ìš”: {{ comment_reactions|get_item:comment.id|get_item:"dislikes" }}</p>

        <form method="POST" action="{% url 'like_dislike_comment' comment.id %}">
            {% csrf_token %}
            <button type="submit" name="value" value="1">ğŸ‘</button>
            <button type="submit" name="value" value="-1">ğŸ‘</button>
        </form>
    {% endfor %}
{% endblock %}
